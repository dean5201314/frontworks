<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css"
    integrity="sha512-1k7mWiTNoyx2XtmI96o+hdjP8nn0f3Z2N4oF/9ZZRgijyV4omsKOXEnqL1gKQNPy2MTSP9rIEWGcH/CInulptA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <h3 class="text-center">每月國際主要股價指數</h3>
  <table class="display" id="myTable">
    <thead>
      <tr>
        <th width="15%" class="text-center">月份</th>
        <th width="8%" class="text-start">台灣-加權指數</th>
        <th width="8%" class="text-start">台灣-上櫃指數</th>
        <th width="8%" class="text-start">美國-那斯達克指數</th>
        <th width="8%" class="text-start">美國-道瓊工業指數</th>
        <th width="8%" class="text-start">日本-日經225指數</th>
        <th width="8%" class="text-start">新加坡-海峽時報指數</th>
        <th width="8%" class="text-start">南韓-綜合指數</th>
        <th width="8%" class="text-start">倫敦-金融時報指數</th>
        <th width="8%" class="text-start">中國-上海綜合指數</th>
        <th width="8%" class="text-start">中國-香港恆生指數</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- pw url -->
  <script src="../ignore/js/pw.js"></script>

  <!-- datatable js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"
    integrity="sha512-BkpSL20WETFylMrcirBahHfSnY++H2O1W+UnEEO4yNIl+jI2+zowyoGJpbtk6bx97fBXf++WJHSSK2MV4ghPcg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    $(document).ready(function () {
    //   let url = weatherUrl;
      let url = 'https://apiservice.mol.gov.tw/OdService/rest/datastore/A17030000J-000050-Ipz';
      const myOl = $('#myOl');
      const myTable = $('#myTable');

      $.ajax({
        type: "get",
        url: url,
        // data: "data",
        // dataType: "dataType",
        success: function (res) {
          // . [] ->  property variable
          // .xxx()  ['xxx']()  ->xxx() method function action
          console.log('res', res);
          console.log('res.result', res.result);          
        //   console.log('res.result.records', res.result.records);
          console.log('res.result["records"]', res.result["records"]);
          let nowIndex = res.result["records"];
          $.each(nowIndex, function (key, value) {
            console.log('key', key);
            console.log('value', value);
            // console.log('value["月別:"]', value["月別"]);
            // console.log('value["台灣-加權指數:"]', value["台灣-加權指數"]);
            let Mon = value["月別"];
            let T_WI = value["台灣-加權指數"];
            let T_OTC = value["台灣-上櫃指數"];
            let US_NAS = value["美國-那斯達克指數"];
            let US_DJI = value["美國-道瓊工業指數"];
            let J_N225 = value["日本-日經225指數"];
            let S_STI = value["新加坡-海峽時報指數"];
            let SK_CI = value["南韓-綜合指數"];
            let L_FTI = value["倫敦-金融時報指數"];
            let C_SCI = value["中國-上海綜合指數"];
            let HK_HSI = value["中國-香港恆生指數"];
            console.log('Mon:', Mon);
            console.log('T_WI:', T_WI);
            console.log('T_OTC:', T_OTC);
            console.log('US_NAS:', US_NAS);
            console.log('US_DJI:', US_DJI);
            console.log('J_N225:', J_N225);
            console.log('S_STI:', S_STI);
            console.log('SK_CI:', SK_CI);
            console.log('L_FTI:', L_FTI);
            console.log('C_SCI:', C_SCI);
            console.log('HK_HSI:', HK_HSI);
            // 月別: "2022-12",
            // 台灣-加權指數: "14138",
            // 台灣-上櫃指數: "180",
            // 美國-那斯達克指數: "10466",
            // 美國-道瓊工業指數: "33147",
            // 日本-日經225指數: "26095",
            // 新加坡-海峽時報指數: "3251",
            // 南韓-綜合指數: "2236",
            // 倫敦-金融時報指數: "7452",
            // 中國-上海綜合指數: "3089",
            // 中國-香港恆生指數: "19781"  

            // let content = `
            //  <li>${nowLocationName}</li>
            // `;
            let content = `
              <tr>                
                <th width="15%" class="text-center">${Mon}</th>
                <th width="8%" class="text-start">${T_WI}</th>
                <th width="8%" class="text-start">${T_OTC}</th>
                <th width="8%" class="text-start">${US_NAS}</th>
                <th width="8%" class="text-start">${US_DJI}</th>
                <th width="8%" class="text-start">${J_N225}</th>
                <th width="8%" class="text-start">${S_STI}</th>
                <th width="8%" class="text-start">${SK_CI}</th>
                <th width="8%" class="text-start">${L_FTI}</th>
                <th width="8%" class="text-start">${C_SCI}</th>
                <th width="8%" class="text-start">${HK_HSI}</th>
              </tr>
            `;
            $('tbody').append(content);
          });

          // run datatable
          myTable.DataTable();

        }
      });
    });

  </script>
</body>

</html>